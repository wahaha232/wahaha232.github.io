<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>London Bus Tour Live Cam</title>
  <meta name="description" content="Watch a real-time London bus tour live stream, see city sights, weather updates, and more.">
  <meta name="keywords" content="London, live cam, bus tour, sightseeing, weather">

  <!-- Google Analytics (GA4) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-R5KWYK2Y7D"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-R5KWYK2Y7D');
  </script>

  <!-- Weather & Time Script -->
  <script>
    const apiKey = '39125b68b267d03f08f70580b5a476cd';
    const lat = 51.5074, lon = -0.1278;

    function updateLocalTime() {
      const now = new Date();
      const year = now.getFullYear();
      const month = String(now.getMonth() + 1).padStart(2, '0');
      const day = String(now.getDate()).padStart(2, '0');
      document.getElementById('local-date').textContent = `${year}/${month}/${day}`;
      const opts = { timeZone: 'Europe/London', hour12: false, hour: '2-digit', minute: '2-digit', second: '2-digit', timeZoneName: 'short' };
      document.getElementById('local-time').textContent = now.toLocaleTimeString('en-GB', opts);
    }

    async function updateWeather() {
      try {
        const res = await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${apiKey}&units=metric`);
        const d = await res.json();
        const { temp, feels_like: feels } = d.main;
        const cond = d.weather[0].main;
        const sunriseTs = d.sys.sunrise * 1000, sunsetTs = d.sys.sunset * 1000;

        document.getElementById('weather-temp').textContent = `${temp.toFixed(1)}¬∞C`;
        document.getElementById('weather-feels').textContent = `${feels.toFixed(1)}¬∞C`;
        document.getElementById('weather-condition').textContent = cond;

        const toOpts = { timeZone: 'Europe/London', hour12: false, hour: '2-digit', minute: '2-digit' };
        document.getElementById('weather-sunrise').textContent = new Date(sunriseTs).toLocaleTimeString('en-GB', toOpts);
        document.getElementById('weather-sunset').textContent = new Date(sunsetTs).toLocaleTimeString('en-GB', toOpts);

        const ico = document.getElementById('weather-animation');
        let emoji = '‚òÅÔ∏è';
        if (/clear/i.test(cond)) emoji = '‚òÄÔ∏è';
        else if (/rain/i.test(cond)) emoji = 'üåßÔ∏è';
        else if (/snow/i.test(cond)) emoji = '‚ùÑÔ∏è';
        ico.textContent = emoji;

        const uvRes = await fetch(`https://api.openweathermap.org/data/2.5/uvi?lat=${lat}&lon=${lon}&appid=${apiKey}`);
        const uv = await uvRes.json();
        document.getElementById('weather-uvi').textContent = uv.value;
      } catch (err) { console.error('Weather error', err); }
    }

    document.addEventListener('DOMContentLoaded', () => {
      updateWeather(); updateLocalTime();
      setInterval(updateWeather, 60000);
      setInterval(updateLocalTime, 1000);
    });
  </script>

  <style>
    body { font-family: Arial, sans-serif; margin: 0; color: #333;
           background: url('https://cdn.pixabay.com/photo/2016/10/17/07/53/london-1749818_1280.jpg') no-repeat center fixed; background-size: cover; }
    body > * { background: rgba(255,255,255,0.9); backdrop-filter: blur(4px); }
    nav, header, main, footer { max-width: 960px; margin: auto; padding: 1rem; }
    nav { display: flex; justify-content: space-between; align-items: center; background: #d00; color: white; }
    nav a { color: white; margin: 0 10px; text-decoration: none; }
    h1 { text-align: center; color: #d00; }
    .content-wrapper { display: flex; justify-content: center; gap: 1rem; padding: 1rem; }
    .weather-card { width: 240px; background: #2a3b5b; color: white;
                  padding: 1em; border-radius: 10px;
                  display: flex; flex-direction: column; align-items: flex-start; text-align: left; }
    .weather-card h3 { margin: 0 0 .5em; font-size: 1.2em; }
    .weather-card p { margin: .2em 0; font-size: .9em; }
    .weather-card .datetime { margin: .2em 0; font-size: .9em; }
    .weather-animation { align-self: center; font-size: 2rem;
                          margin: .2em 0; animation: float 2s ease-in-out infinite; }
    @keyframes float { 0%,100%{ transform: translateY(0); } 50%{ transform: translateY(-8px); } }
    .info { background: #f0f4f8; padding: 1em; margin: 20px auto; border-radius: 8px; text-align: left; }
    iframe { width: 100%; max-width: 600px; height: 400px; border: none; }
    .ads-container { display: flex; justify-content: center; gap: 1rem; margin: 20px auto; max-width: 960px; }
    .ad-slot { flex: 1; }
  </style>
</head>
<body>
  <nav>
    <strong>London Bus Tour Live</strong>
    <div>
      <a href="index.html">Home</a>
      <a href="about.html">About</a>
      <a href="privacy.html">Privacy Policy</a>
    </div>
  </nav>
  <header><h1>London Bus Tour - Live Stream</h1>
    <p style="text-align:center;">Enjoy a virtual ride through London with real-time views from a tour bus</p>
  </header>
  <main class="content-wrapper">
    <div class="weather-card">
      <h3>London Weather</h3>
      <div id="weather-animation" class="weather-animation">‚òÅÔ∏è</div>
      <p>Temperature: <span id="weather-temp">--¬∞C</span></p>
      <p>Feels Like: <span id="weather-feels">--¬∞C</span></p>
      <p>Condition: <span id="weather-condition">--</span></p>
      <p>Sunrise: <span id="weather-sunrise">--:--</span></p>
      <p>Sunset: <span id="weather-sunset">--:--</span></p>
      <p>UV Index: <span id="weather-uvi">--</span></p>
      <p class="datetime">Date: <span id="local-date">0000/00/00</span></p>
      <p class="datetime">Time: <span id="local-time">--:--:-- GMT</span></p>
    </div>
    <iframe src="https://www.youtube.com/embed/KSsfLxP-A9g?autoplay=1&mute=1" allowfullscreen></iframe>
  </main>

  <div class="info">
    <h2>Visitor Info</h2>
    <p><strong>City:</strong> London, United Kingdom</p>
    <p><strong>Tour Type:</strong> Open-top sightseeing bus</p>
    <p><strong>Tour Schedule:</strong> Daily from 9 AM to 6 PM</p>
    <p><strong>Official Website:</strong> <a href="https://www.visitlondon.com/" target="_blank">Visit London</a></p>
    <p><strong>Airports:</strong><br>
       <a href="https://www.heathrow.com" target="_blank">Heathrow</a><br>
       <a href="https://www.gatwickairport.com" target="_blank">Gatwick</a>
    </p>
    <p><strong>Eurostar:</strong> <a href="https://www.eurostar.com" target="_blank">Eurostar Official Site</a></p>
    <p><strong>London Underground:</strong> <a href="https://tfl.gov.uk/modes/tube/" target="_blank">Official London Underground Website</a></p>
  </div>

  <!-- Ad Slots -->
  <div class="ads-container">
    <div class="ad-slot">
      <script async data-cfasync="false" src="//pl26441868.profitableratecpm.com/7d9bb8a39fc580ee58de14d8a8e63eab/invoke.js"></script>
      <div id="container-7d9bb8a39fc580ee58de14d8a8e63eab"></div>
    </div>
    <div class="ad-slot">
      <script async data-cfasync="false" src="//pl26441868.profitableratecpm.com/7d9bb8a39fc580ee58de14d8a8e63eab/invoke.js"></script>
      <div id="container-7d9bb8a39fc580ee58de14d8a8e63eab-2"></div>
    </div>
    <div class="ad-slot">
      <script async data-cfasync="false" src="//pl26441868.profitableratecpm.com/7d9bb8a39fc580ee58de14d8a8e63eab/invoke.js"></script>
      <div id="container-7d9bb8a39fc580ee58de14d8a8e63eab-3"></div>
    </div>
  </div>

  <!-- Visitor Counter -->
  <div class="visitor-counter" style="text-align:center; margin:20px 0;">
    <a href="https://cn.web-counter.net" title="Visitor Counter">
      <img src="https://www.web-counter.net/count_20091204.php?c=DtiXpOV67It&start=10000" style="border:0;padding:0;margin:0;" alt="Visitor Count">
    </a>
  </div>

  <footer style="text-align:center; padding:1rem;">&copy; 2025 London Bus Tour Live Cam</footer>
</body>
</html>
