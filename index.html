<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>London Bus Tour Live Cam</title>
  <meta name="description" content="Watch a real-time London bus tour live stream, see city sights, weather updates, and more.">
  <meta name="keywords" content="London, live cam, bus tour, sightseeing, weather">

  <!-- Google Font for Handwritten Style -->
  <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400;700&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: 'Caveat', cursive;
      margin: 0;
      color: #333333;
      background: url('https://raw.githubusercontent.com/wahaha232/wahaha232.github.io/refs/heads/main/londonclassic.png') no-repeat center center fixed;
      background-size: cover;
    }
    body > * {
      background: rgba(245,245,230,0.85);
      backdrop-filter: blur(4px);
    }
    nav, header, main, footer { max-width: 1200px; margin: auto; padding: 1rem; }
    nav { display: flex; justify-content: flex-end; background: #5a5a5a; }
    nav a {
      color: #f5f5e6;
      margin: 0 10px;
      text-decoration: none;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
      font-weight: bold;
    }
    h1 {
      text-align: center;
      color: #444444;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
      font-size: 3em;
      font-weight: bold;
      margin: 0;
    }
    header p {
      text-align: center;
      margin: .5em 0 0;
      font-size: 1.2em;
    }
    .content-wrapper {
      display: flex;
      justify-content: center;
      align-items: flex-start;
      gap: 1rem;
      padding: 1rem;
      max-width: 1200px;
    }
    .weather-card {
      width: 240px;
      background: #6b7280;
      color: #f5f5e6;
      padding: 1em;
      border-radius: 10px;
      border: 2px solid #444444;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      box-shadow: 3px 3px 5px rgba(0,0,0,0.2);
      min-height: 440px;
    }
    .weather-card > div {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      justify-content: center;
      align-items: center;
      width: 100%;
    }
    .weather-card h3 {
      margin: 0;
      font-size: 1.6em;
      text-align: center;
    }
    .weather-card p {
      margin: 0;
      font-size: 1.3em;
      line-height: 1.2;
      text-align: center;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .weather-card .datetime {
      font-size: 1.1em;
      line-height: 1.2;
      margin: 0;
      text-align: center;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .weather-animation {
      font-size: 3rem;
      animation: float 2s ease-in-out infinite;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    @keyframes float { 0%,100%{ transform: translateY(0); } 50%{ transform: translateY(-8px); } }
    .video-wrapper {
      flex: 1;
      width: 100%;
    }
    iframe {
      width: 100%;
      height: 440px;
      border: 2px solid #444444;
      border-radius: 8px;
    }
    .share-buttons {
      display: flex;
      justify-content: center;
      gap: 1rem;
      margin-top: 1rem;
      max-width: 944px;
      margin-left: auto;
      margin-right: auto;
    }
    .share-buttons a {
      text-decoration: none;
      background: #f5f5e6;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: transform 0.3s, background 0.3s;
      padding: 2px;
    }
    .share-buttons a:hover {
      transform: scale(1.2);
      background: #d3d3c4;
    }
    .share-buttons svg {
      width: 100%;
      height: 100%;
      fill: #444444;
    }
    .info {
      background: none; backdrop-filter: none;
      padding: 1.5em; margin: 20px auto;
      border-radius: 8px; text-align: center;
      font-size: 1.6em; font-weight: bold;
      max-width: 600px; line-height: 1.2em;
      color: #4a4a4a;
    }
    .info h2 { font-size: 2em; margin-bottom: .5em; }
    .info p { margin: .2em 0; }
    .ads-container {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 1rem;
      margin: 20px auto;
      max-width: 1200px;
      background: none;
      backdrop-filter: none;
    }
    .ad-slot {
      flex: 1;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .visitor-counter {
      text-align: center;
      margin: 20px 0;
      font-size: 1.4em;
      color: #444444;
      background: none; /* 移除底色 */
      backdrop-filter: none; /* 移除模糊效果 */
    }
    .visitor-counter a {
      font-family: 'Caveat', cursive;
    }
    .visitor-counter font {
      font-family: 'Caveat', cursive;
      font-size: 1em;
    }
    footer {
      text-align: center;
      padding: 1rem;
      color: #444444;
      font-size: 1.6em;
      background: none;
      backdrop-filter: none;
    }
  </style>
</head>
<body>
  <nav>
    <a href="index.html">Home</a>
    <a href="about.html">About</a>
    <a href="privacy.html">Privacy Policy</a>
  </nav>
  <header>
    <h1>London Bus Tour - Live Stream</h1>
    <p>Welcome to London! Experience the city’s iconic sights live on our virtual bus tour, anytime, anywhere.</p>
  </header>
  <main class="content-wrapper">
    <div class="weather-card">
      <div>
        <h3>London Weather</h3>
        <div id="weather-animation" class="weather-animation">☁️</div>
        <p>Temperature: <span id="weather-temp">--°C</span></p>
        <p>Feels Like: <span id="weather-feels">--°C</span></p>
        <p>Condition: <span id="weather-condition">--</span></p>
        <p>UV Index: <span id="weather-uv">--</span></p>
        <p>Sunrise: <span id="weather-sunrise">--:--</span></p>
        <p>Sunset: <span id="weather-sunset">--:--</span></p>
      </div>
      <div>
        <p class="datetime">Date: <span id="local-date">0000/00/00</span></p>
        <p class="datetime">Time: <span id="local-time">--:--:-- GMT</span></p>
      </div>
    </div>
    <div class="video-wrapper">
      <iframe src="https://www.youtube.com/embed/KSsfLxP-A9g?autoplay=1&mute=1" allowfullscreen></iframe>
      <div class="share-buttons">
        <a href="#" onclick="shareTo('instagram')" title="Share on Instagram">
          <svg viewBox="0 0 24 24">
            <path d="M12 2.163c3.204 0 3.584.012 4.85.07 1.366.062 2.633.328 3.608 1.303.975.975 1.241 2.241 1.303 3.608.058 1.266.07 1.646.07 4.85s-.012 3.584-.07 4.85c-.062 1.366-.328 2.633-1.303 3.608-.975.975-2.242 1.241-3.608 1.303-1.266.058-1.646.07-4.85.07s-3.584-.012-4.85-.07c-1.366-.062-2.633-.328-3.608-1.303-.975-.975-1.241-2.242-1.303-3.608-.058-1.266-.07-1.646-.07-4.85s.012-3.584.07-4.85c.062-1.366.328-2.633 1.303-3.608.975-.975 2.241-1.241 3.608-1.303 1.266-.058 1.646-.07 4.85-.07m0-2.163c-3.314 0-3.736.013-5.038.07-1.302.057-2.472.272-3.46.594-1.011.322-1.846.749-2.646 1.549-.8.8-1.227 1.635-1.549 2.646-.322.988-.537 2.158-.594 3.46-.057 1.302-.07 1.724-.07 5.038s.013 3.736.07 5.038c.057 1.302.272 2.472.594 3.46.322 1.011.749 1.846 1.549 2.646.8.8 1.635 1.227 2.646 1.549.988.322 2.158.537 3.46.594 1.302.057 1.724.07 5.038.07s3.736-.013 5.038-.07c1.302-.057 2.472-.272 3.46-.594 1.011-.322 1.846-.749 2.646-1.549.8-.8 1.227-1.635 1.549-2.646.322-.988.537-2.158.594-3.46.057-1.302.07-1.724.07-5.038s-.013-3.736-.07-5.038c-.057-1.302-.272-2.472-.594-3.46-.322-1.011-.749-1.846-1.549-2.646-.8-.8-1.635-1.227-2.646-1.549-.988-.322-2.158-.537-3.46-.594-1.302-.058-1.724-.07-5.038-.07z" />
            <path d="M12 7.395c-2.676 0-4.85 2.174-4.85 4.85s2.174 4.85 4.85 4.85 4.85-2.174 4.85-4.85-2.174-4.85-4.85-4.85zm0 7.413c-1.676 0-3.063-1.387-3.063-3.063s1.387-3.063 3.063-3.063 3.063 1.387 3.063 3.063-1.387 3.063-3.063 3.063z" />
            <circle cx="15.289" cy="8.711" r="1" />
          </svg>
        </a>
        <a href="#" onclick="shareTo('twitter')" title="Share on Twitter">
          <svg viewBox="0 0 24 24">
            <path d="M22.23 5.924c-.736.326-1.527.547-2.357.646.847-.508 1.498-1.312 1.804-2.27-.793.47-1.67.812-2.6 1.002-.748-.797-1.814-1.294-2.993-1.294-2.265 0-4.103 1.838-4.103 4.103 0 .322.036.635.107.935-3.41-.17-6.433-1.805-8.457-4.287-.353.607-.556 1.312-.556 2.064 0 1.424.724 2.682 1.825 3.415-.673-.022-1.305-.206-1.859-.514v.052c0 1.988 1.415 3.647 3.293 4.023-.344.095-.707.145-1.08.145-.264 0-.521-.026-.772-.073.522 1.63 2.038 2.816 3.833 2.85-1.404 1.1-3.174 1.756-5.1 1.756-.331 0-.658-.019-.98-.057 1.816 1.164 3.973 1.843 6.29 1.843 7.547 0 11.675-6.252 11.675-11.675 0-.178-.004-.355-.012-.53.801-.578 1.497-1.3 2.047-2.123z" />
          </svg>
        </a>
        <a href="#" onclick="shareTo('facebook')" title="Share on Facebook">
          <svg viewBox="0 0 24 24">
            <path d="M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.5-4z" />
          </svg>
        </a>
        <a href="#" onclick="shareTo('tiktok')" title="Share on TikTok">
          <svg viewBox="0 0 24 24">
            <path d="M16.6 5.28v4.79c-1.24-.18-2.49-.3-3.75-.35V5.28c1.7-.04 3.39-.04 5.09 0zm-5.09 13.44V7.28c-1.26.05-2.52.17-3.75.35v7.09c0 2.68 1.44 4.09 3.75 4.09s3.75-1.41 3.75-4.09V12.9l-1.49.66c-.49.22-1.02.33-1.56.33-1.24 0-2.25-.86-2.25-1.92V9.86c.86-.16 1.73-.27 2.61-.32v1.79c0 .48.26.74.74.74s.74-.26.74-.74V6.09c-1.75 0-3.49 0-5.23.04C8.64 6.21 8 6.75 8 7.38v8.38c0 2.05 1.71 3.65 3.51 3.65 1.8 0 3.49-1.61 3.49-3.65v-1.26l1.49-.66c.49-.22 1.02-.33 1.56-.33.36 0 .71.06 1.04.17v-3.94c-1.1-.1-2.21-.16-3.31-.18z" />
          </svg>
        </a>
      </div>
    </div>
  </main>
  <div class="info">
    <h2>Visitor Info</h2>
    <p><strong>City:</strong> London, United Kingdom</p>
    <p><strong>Tour Type:</strong> Open-top sightseeing bus</p>
    <p><strong>Tour Schedule:</strong> Daily from 9 AM to 6 PM</p>
    <p><strong>Official Website:</strong> <a href="https://www.visitlondon.com/" target="_blank">Visit London</a></p>
    <p><strong>Airports:</strong><br>
       <a href="https://www.heathrow.com" target="_blank">Heathrow</a><br>
       <a href="https://www.gatwickairport.com" target="_blank">Gatwick</a>
    </p>
    <p><strong>Eurostar:</strong> <a href="https://www.eurostar.com" target="_blank">Eurostar Official Site</a></p>
    <p><strong>London Underground:</strong> <a href="https://tfl.gov.uk/modes/tube/" target="_blank">Official London Underground Website</a></p>
  </div>
  <div class="ads-container">
    <div class="ad-slot">
      <script async data-cfasync="false" src="//pl26441868.profitableratecpm.com/7d9bb8a39fc580ee58de14d8a8e63eab/invoke.js" onerror="console.log('Ad script failed to load');"></script>
      <div id="container-7d9bb8a39fc580ee58de14d8a8e63eab"></div>
    </div>
    <div class="ad-slot">
      <script async data-cfasync="false" src="//pl26441868.profitableratecpm.com/7d9bb8a39fc580ee58de14d8a8e63eab/invoke.js" onerror="console.log('Ad script failed to load');"></script>
      <div id="container-7d9bb8a39fc580ee58de14d8a8e63eab-2"></div>
    </div>
    <div class="ad-slot">
      <script async data-cfasync="false" src="//pl26441868.profitableratecpm.com/7d9bb8a39fc580ee58de14d8a8e63eab/invoke.js" onerror="console.log('Ad script failed to load');"></script>
      <div id="container-7d9bb8a39fc580ee58de14d8a8e63eab-3"></div>
    </div>
  </div>
  <div class="visitor-counter">
    <a href="https://cn.web-counter.net" title=""><img src="https://www.web-counter.net/count_20091204.php?c=1cTKaiN1EVX" style="border:0;padding:0;margin:0;" alt=""></a><br/><font size="1" face="Arial"><a href="https://cn.web-counter.net" title=""></a></font>
  </div>
  <footer>© 2025 London Bus Tour Live Cam</footer>

  <script>
    const apiKey = '39125b68b267d03f08f70580b5a476cd'; // Replace with a new valid OpenWeatherMap API key
    const lat = 51.5074, lon = -0.1278;

    function updateLocalTime() {
      const now = new Date();
      const year = now.getFullYear();
      const month = String(now.getMonth() + 1).padStart(2, '0');
      const day = String(now.getDate()).padStart(2, '0');
      document.getElementById('local-date').textContent = `${year}/${month}/${day}`;
      const opts = { timeZone: 'Europe/London', hour12: false, hour: '2-digit', minute: '2-digit', second: '2-digit', timeZoneName: 'short' };
      document.getElementById('local-time').textContent = now.toLocaleTimeString('en-GB', opts);
    }

    async function updateWeather() {
      try {
        const res = await fetch(`https://api.openweathermap.org/data/3.0/onecall?lat=${lat}&lon=${lon}&appid=${apiKey}&units=metric&exclude=hourly,daily,alerts`);
        if (!res.ok) throw new Error(`HTTP error! status: ${res.status}`);
        const d = await res.json();

        const { temp, feels_like, uvi, weather, sunrise, sunset } = d.current;
        const cond = weather[0].main;

        document.getElementById('weather-temp').textContent = `${temp.toFixed(1)}°C`;
        document.getElementById('weather-feels').textContent = `${feels_like.toFixed(1)}°C`;
        document.getElementById('weather-condition').textContent = cond;
        document.getElementById('weather-uv').textContent = uvi.toFixed(1);
        document.getElementById('weather-sunrise').textContent = new Date(sunrise * 1000).toLocaleTimeString('en-GB', { timeZone: 'Europe/London', hour12: false, hour: '2-digit', minute: '2-digit' });
        document.getElementById('weather-sunset').textContent = new Date(sunset * 1000).toLocaleTimeString('en-GB', { timeZone: 'Europe/London', hour12: false, hour: '2-digit', minute: '2-digit' });

        const ico = document.getElementById('weather-animation');
        let emoji = '☁️';
        if (/clear/i.test(cond)) emoji = '☀️';
        else if (/rain/i.test(cond)) emoji = '🌧️';
        else if (/snow/i.test(cond)) emoji = '❄️';
        ico.textContent = emoji;
      } catch (err) {
        console.error('Weather fetch failed:', err.message);
        document.getElementById('weather-temp').textContent = '--°C';
        document.getElementById('weather-feels').textContent = '--°C';
        document.getElementById('weather-condition').textContent = 'N/A';
        document.getElementById('weather-uv').textContent = '--';
        document.getElementById('weather-sunrise').textContent = '--:--';
        document.getElementById('weather-sunset').textContent = '--:--';
      }
    }

    function updateVisitorCount() {
      let count = localStorage.getItem('visitorCount') || 0;
      count = parseInt(count) + 1;
      localStorage.setItem('visitorCount', count);
      // 新計數器已由外部服務處理，移除本地更新
    }

    function shareTo(platform) {
      console.log(`shareTo called with platform: ${platform}`);
      try {
        const url = encodeURIComponent(window.location.href);
        const title = encodeURIComponent(document.title);
        const description = encodeURIComponent(document.querySelector('meta[name="description"]').content);
        let shareUrl;

        switch (platform) {
          case 'instagram':
            console.log('Processing Instagram share');
            alert('Instagram does not support direct sharing. Please copy the link and share it manually: ' + url);
            return;
          case 'twitter':
            shareUrl = `https://twitter.com/intent/tweet?url=${url}&text=${title}`;
            break;
          case 'facebook':
            shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${url}&title=${title}`;
            break;
          case 'tiktok':
            console.log('Processing TikTok share');
            alert('TikTok does not support direct sharing. Please copy the link and share it manually: ' + url);
            return;
          default:
            console.error('Unknown platform:', platform);
            return;
        }

        const newWindow = window.open(shareUrl, '_blank', 'width=600,height=400');
        if (!newWindow || newWindow.closed || typeof newWindow.closed === 'undefined') {
          alert('Please allow pop-ups for this site to share content.');
        }
      } catch (err) {
        console.error('Share failed:', err.message);
        alert('Sharing failed. Please check your internet connection or try again later.');
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      updateWeather();
      updateLocalTime();
      updateVisitorCount();
      setInterval(updateWeather, 1800000);
      setInterval(updateLocalTime, 1000);
    });
  </script>
</body>
</html>